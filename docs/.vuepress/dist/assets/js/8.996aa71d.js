(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{356:function(e,a,t){"use strict";t.r(a);var r=t(42),s=Object(r.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[e._v("#")]),e._v(" 介绍")]),e._v(" "),t("p",[e._v("Orange 连接 redis 同样使用了连接池，可以配置连接池相关参数，redis 操作通过 gorm 包实现，对 mysql 增删改操作简单方便。")]),e._v(" "),t("h2",{attrs:{id:"redis-配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis-配置"}},[e._v("#")]),e._v(" Redis 配置")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('[database] \n    initCap = 2 #数据库连接池 初始化连接数\n    maxCap = 5 #数据库连接池 最大连接数，超过次数后连接则实时生成实时关闭，类似php短链接\n    idleTimeout = 5 # 连接空闲释放时间\n    [database.redis]\n        [database.redis.default] #redis配置，可以配置多个，默认名称default\n            addr = "192.168.137.100:6379"\n            password = ""\n            dbnum = 5\n')])])]),t("h2",{attrs:{id:"获取-redis-操作对象"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#获取-redis-操作对象"}},[e._v("#")]),e._v(" 获取 Redis 操作对象")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('//获取一个 Redis 操作对象，参数是配置中对应的名称\ndb, put, err := database.GetRedis("default")\n\n//连接使用完成后记得将连接放回连接池，否则会造成连接池耗尽大量产生短链接等问题\ndefer  database.PutConn(put) \n')])])]),t("h2",{attrs:{id:"redis-操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis-操作"}},[e._v("#")]),e._v(" Redis 操作")]),e._v(" "),t("ul",[t("li",[e._v("获取到的操作对象即是 redigo 对象，可以直接按照 redigo包的使用方法进行操作；")]),e._v(" "),t("li",[e._v("redigo 包地址 "),t("a",{attrs:{href:"https://github.com/gomodule/redigo",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/gomodule/redigo"),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("redigo  文档地址 "),t("a",{attrs:{href:"https://godoc.org/github.com/gomodule/redigo/redis",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://godoc.org/github.com/gomodule/redigo/redis"),t("OutboundLink")],1)])]),e._v(" "),t("h2",{attrs:{id:"redis-命令执行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis-命令执行"}},[e._v("#")]),e._v(" Redis 命令执行")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('rdx, put, err := database.GetRedis("default")\ndefer  database.PutConn(put) \n\n_, err = rdx.Do("HSET", "cacheKey", "fieldName", "value_xxx")\n')])])])])}),[],!1,null,null,null);a.default=s.exports}}]);